## s3-whitelist

s3-whitelist is a super simple cli tool for AWS S3. It does one thing: whitelists the public ip address on your current machine to allow access to an s3 bucket for local development.

## Installation

```bash
npm install -g s3-whitelist
```

## Usage


Whitelist your IP address:

```bash
s3-whitelist add --bucket myBucket --region us-east-1
```

Remove a whitelist added by `s3-whitelist`:

```bash
s3-whitelist remove --bucket myBucket --region us-east-1
```

### Arguments

**-- bucket**
Your AWS S3 bucket name (required).

**-- region**
AWS region (defaults to us-east-1).

If your credentials are not set locally in `~/.aws/credentials` You can also explicitly provide credentials as arguments:
 - **accessKeyId** (optional)
 - **secretAccessKey** (optional)

### Commands

`s3-whitelist add`

Either adds a new AWS S3 bucket policy statement or updates an existing one generated by `s3-whitelist`. The policy statement whitelists the public IP address on your current machine.

`s3-whitelist remove`

Removes the AWS S3 bucket policy statement generated by `s3-whitelist`.


## Notes

- At the moment s3-whitelist requires node v9.x.
- The S3 bucket policy statement generated by `s3-whitelist` looks like:

```js
{
  "Sid": "s3-whitelist",
  "Effect": "Allow",
  "Principal": "*",
  "Action": "s3:*",
  "Resource": "arn:aws:s3:::myBucket/*",
  "Condition": {
    "IpAddress": {
      "aws:SourceIp": "161.214.108.93"
    }
  }
}
```

- run a cron job:

```bash
node /usr/local/lib/node_modules/s3-whitelist add --bucket myBucket
```